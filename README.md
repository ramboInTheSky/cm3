# Run local instances of identity-server + mongo & matrix

## Pre-requisites:

* Docker for OS X
* jq (install with `brew install jq`)

## Run identity-server + mongo & matrix

From the project root, run
```bash
./setup_local.sh
```

## Visit Matrix in browser:

[http://localhost:9091/matrix](http://localhost:9091/matrix)

*NOTE*: default username/org/password is admin/acadiasoft/password

## To view see logs

### identity-server
```bash
docker run -it --rm -v identity-server-logs:/logs ubuntu bash
cd /logs
```

### matrix
```bash
docker run -it --rm -v matrix-logs:/logs ubuntu bash
cd /logs
```

## Configure local client admin app

### Create a properties file for your user

* `src/test/resources/props/${user.name}.properties`, base it off the `example.properties` in that directory
* Change the `SSO_CLIENT_ID` and `SSO_CLIENT_SECRET` values to be the `clientadmin_client_id` and `clientadmin_client_secret` values in the `.dev_secrets` file (locaated in the root of the project, generated by the `setup_local.sh` script)
* Run class `ClientAdminTestMain` (runs backend for client admin webapp)
* Run `npm run watch` in `src/main/webapp` to run the webpack in watch mode (regenerated files to src/main/webapp/dist on any detected change)

Now visit [http://localhost:9031/clientadmin](http://localhost:9031/clientadmin)

### Stuff of note

* The webpack config uses a vendor bundle strategy that utilizes a manifest layer for indirection, which makes it very efficient & cheap when custom code (non vendor) is modified (read: vendor JS/CSS is not re-computed and output on every code modification)

